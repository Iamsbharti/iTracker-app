<link
  href="https://fonts.googleapis.com/icon?family=Material+Icons"
  rel="stylesheet"
/>
<div class="dashboard">
  <div class="dashboard__navbar">
    <div class="navbar__icons">
      <img src="assets/virus.png" alt="" (click)="getAllIssues()" />
      <span>i</span><code>Tracker</code>
    </div>
    <div class="dashboard__navbar__welcome">
      <p>Welcome To iTracker</p>
    </div>
    <button
      mat-raised-button
      color="primary"
      class="navbar__button__create"
      title="create a issue"
      (click)="open(createModal)"
    >
      Create
    </button>
    <input
      type="search"
      name="search"
      placeholder="Search"
      class="navbar__input__search"
      title="search by keywords"
    />
    <img src="assets/shutdown-96.png" title="logout" alt="" />
  </div>
  <div class="dashboard__main__content">
    <div class="dasboard__filter__sidebar">
      <div class="dasboard__username">
        <p class="option__bold__text">Saurabh Bharti</p>
      </div>
      <div class="div__break__line"></div>
      <div class="dashboard__filter__list">
        <p class="option__bold__text">Filters</p>
        <p class="filters" (click)="getAllIssues()">
          Main view (status-filtered)
        </p>
        <p
          class="filters"
          (click)="filterIssues(userId, 'all', 'status', userName)"
        >
          All Issues
        </p>
        <p
          class="filters"
          (click)="filterIssues(userId, 'reportedByMe', 'status', name)"
        >
          Reported by me
        </p>
        <p
          class="filters"
          (click)="filterIssues(userId, 'openIssues', 'status', userName)"
        >
          My Open Issues
        </p>
        <p
          class="filters"
          (click)="filterIssues(userId, 'closedIssues', 'status', userName)"
        >
          Done Issues
        </p>
        <p
          class="filters"
          (click)="filterIssues(userId, 'resolvedRecent', 'time', userName)"
        >
          Resolved recently
        </p>
        <p
          class="filters"
          (click)="filterIssues(userId, 'updatedRecent', 'time', userName)"
        >
          Updated recently
        </p>
        <div class="div__break__line"></div>
      </div>
    </div>
    <!--categorized table view start-->

    <div class="dashboard__issue__list" [hidden]="showCategorizedIssues">
      <div class="issue__table__header">
        <p>
          Currently showing
          <span style="color: blueviolet"> all assined issues</span>
        </p>
      </div>
      <div class="issue__table">
        <table>
          <tr>
            <th>
              Title <i class="material-icons sort__icon" title="sort">sort</i>
            </th>
            <th>
              Reporter<i class="material-icons sort__icon" title="sort">sort</i>
            </th>
            <th>
              Created On<i class="material-icons sort__icon" title="sort"
                >sort</i
              >
            </th>
            <th>
              Status<i class="material-icons sort__icon" title="sort">sort</i>
            </th>
          </tr>
          <tr *ngFor="let issue of allIssues">
            <td class="title__col">{{ issue.title }}</td>
            <td>{{ issue.reporter }}</td>
            <td>{{ issue.createDate | date }}</td>
            <td>{{ issue.status }}</td>
          </tr>
        </table>
        <div class="paginator__div">
          <mat-paginator
            class="issues__paginator"
            [length]="length"
            [pageSize]="pageSize"
          >
          </mat-paginator>
        </div>
      </div>
    </div>

    <!--categorized table view end-->

    <div class="dashboard__footbar"></div>
    <div class="dashboard__issue__filtered__list" [hidden]="showFilteredIssues">
      <div class="issue__column__header">
        <p>
          Currently showing
          <span style="color: blueviolet">{{ displayFilterType }}</span>
        </p>
      </div>
      <div class="issue__list__filtered__div">
        <div *ngFor="let issue of allIssues">
          <div class="issue__card__filtered">
            <p class="issue__title">{{ issue.title }}</p>
            <p class="issue__priority__high">
              {{ issue.priority }}
            </p>
            <p>-{{ issue.reporter.split(" ")[0] }}</p>
          </div>
        </div>
      </div>
      <div class="paginator__div">
        <mat-paginator class="issues__paginator" [length]="100" [pageSize]="3">
        </mat-paginator>
      </div>
    </div>
  </div>
  <!--Create Issue Modal-->
  <ng-template #createModal let-modal>
    <div class="modal-header">
      <h4 class="modal-title" id="modal-create">You are creating...</h4>
    </div>
    <div class="modal-body">
      <app-create-issue (closeModal)="modal.close()"></app-create-issue>
    </div>
    <div class="modal-footer">
      <button
        type="button"
        class="btn btn-outline-dark"
        (click)="modal.close('Save click')"
      >
        Done?
      </button>
    </div>
  </ng-template>
</div>
